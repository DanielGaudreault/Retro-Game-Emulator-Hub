<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro ROM Player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Press Start 2P', cursive;
        }

        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 4px solid #ff0080;
            position: relative;
        }

        h1 {
            font-size: 2.5rem;
            color: #00ffff;
            text-shadow: 3px 3px 0 #ff0080, 6px 6px 0 #000;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .tagline {
            font-size: 1rem;
            color: #ffcc00;
            margin-bottom: 20px;
        }

        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 100;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }

        .upload-section {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
            border: 2px solid #00ffff;
        }

        .upload-section h2 {
            color: #ffcc00;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px solid #ff0080;
            padding-bottom: 10px;
        }

        .drop-zone {
            border: 3px dashed #00ffff;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s;
            background: rgba(0, 255, 255, 0.1);
        }

        .drop-zone:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: #ff0080;
        }

        .drop-zone i {
            font-size: 3rem;
            color: #ffcc00;
            margin-bottom: 15px;
            display: block;
        }

        .file-input {
            display: none;
        }

        .browse-btn {
            background: #ff0080;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
            margin-top: 15px;
            font-size: 0.8rem;
        }

        .browse-btn:hover {
            background: #ff3399;
            box-shadow: 0 0 10px #ff0080;
        }

        .game-info {
            flex: 2;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(255, 0, 128, 0.3);
            border: 2px solid #ff0080;
        }

        .game-info h2 {
            color: #00ffff;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px solid #ffcc00;
            padding-bottom: 10px;
        }

        .game-screen {
            width: 100%;
            background: #000;
            border: 5px solid #ffcc00;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
            position: relative;
            height: 400px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #gameCanvas {
            display: block;
            background: #000;
        }

        .placeholder-screen {
            color: #ffcc00;
            text-align: center;
            padding: 20px;
        }

        .placeholder-screen i {
            font-size: 4rem;
            margin-bottom: 20px;
            display: block;
        }

        .game-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .control-btn {
            background: #ffcc00;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 0.8rem;
        }

        .control-btn:hover {
            background: #ffdd44;
            box-shadow: 0 0 10px #ffcc00;
        }

        .control-btn:disabled {
            background: #666;
            color: #999;
            cursor: not-allowed;
            box-shadow: none;
        }

        .recent-games {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.3);
            border: 2px solid #ffcc00;
            margin-top: 30px;
        }

        .recent-games h2 {
            color: #ff0080;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px solid #00ffff;
            padding-bottom: 10px;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .game-card {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .game-card:hover {
            transform: translateY(-5px);
            border-color: #00ffff;
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
        }

        .game-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #ffcc00;
        }

        .game-title {
            font-size: 0.7rem;
            color: #fff;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            border-top: 4px solid #ffcc00;
            color: #ffcc00;
            font-size: 0.7rem;
        }

        .pixel-corner {
            position: absolute;
            width: 20px;
            height: 20px;
        }

        .top-left {
            top: -2px;
            left: -2px;
            border-top: 4px solid #00ffff;
            border-left: 4px solid #00ffff;
        }

        .top-right {
            top: -2px;
            right: -2px;
            border-top: 4px solid #00ffff;
            border-right: 4px solid #00ffff;
        }

        .bottom-left {
            bottom: -2px;
            left: -2px;
            border-bottom: 4px solid #00ffff;
            border-left: 4px solid #00ffff;
        }

        .bottom-right {
            bottom: -2px;
            right: -2px;
            border-bottom: 4px solid #00ffff;
            border-right: 4px solid #00ffff;
        }

        .file-info {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            border: 1px solid #ff0080;
        }

        .file-info h3 {
            color: #ffcc00;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .file-details {
            font-size: 0.7rem;
            color: #00ffff;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .game-controls {
                flex-direction: column;
                gap: 10px;
            }
            
            .control-btn {
                width: 100%;
            }
        }

        /* CRT screen effect */
        .crt-effect::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
            background-size: 100% 4px;
            z-index: 2;
            pointer-events: none;
        }

        .crt-effect::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: rgba(0, 255, 255, 0.05);
            opacity: 0.1;
            z-index: 2;
            pointer-events: none;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="scanlines"></div>
    <div class="container">
        <header>
            <h1>RETRO ROM PLAYER</h1>
            <p class="tagline">Upload and play your favorite classic games directly in your browser</p>
        </header>

        <div class="main-content">
            <div class="upload-section">
                <div class="pixel-corner top-left"></div>
                <div class="pixel-corner top-right"></div>
                <div class="pixel-corner bottom-left"></div>
                <div class="pixel-corner bottom-right"></div>
                
                <h2>UPLOAD ROM</h2>
                <div class="drop-zone" id="dropZone">
                    <i class="fas fa-gamepad"></i>
                    <p>Drag & drop your ROM file here</p>
                    <p>or</p>
                    <button class="browse-btn" id="browseBtn">BROWSE FILES</button>
                    <input type="file" id="fileInput" class="file-input" accept=".nes,.gb,.gbc,.gba,.smc,.sfc,.md,.gen,.a26,.bin">
                </div>
                
                <div class="file-info" id="fileInfo" style="display: none;">
                    <h3>SELECTED FILE</h3>
                    <div class="file-details">
                        <p>File: <span id="fileName">-</span></p>
                        <p>Size: <span id="fileSize">-</span></p>
                        <p>Type: <span id="fileType">-</span></p>
                    </div>
                </div>
            </div>

            <div class="game-info">
                <div class="pixel-corner top-left"></div>
                <div class="pixel-corner top-right"></div>
                <div class="pixel-corner bottom-left"></div>
                <div class="pixel-corner bottom-right"></div>
                
                <h2>GAME SCREEN</h2>
                <div class="game-screen crt-effect">
                    <div class="placeholder-screen" id="placeholderScreen">
                        <i class="fas fa-upload"></i>
                        <p>Upload a ROM file to start playing</p>
                    </div>
                    <canvas id="gameCanvas" width="640" height="400" style="display: none;"></canvas>
                </div>
                
                <div class="game-controls">
                    <button class="control-btn" id="playBtn" disabled>
                        <i class="fas fa-play"></i> PLAY
                    </button>
                    <button class="control-btn" id="pauseBtn" disabled>
                        <i class="fas fa-pause"></i> PAUSE
                    </button>
                    <button class="control-btn" id="resetBtn" disabled>
                        <i class="fas fa-redo"></i> RESET
                    </button>
                    <button class="control-btn" id="fullscreenBtn">
                        <i class="fas fa-expand"></i> FULLSCREEN
                    </button>
                </div>
            </div>
        </div>

        <div class="recent-games">
            <div class="pixel-corner top-left"></div>
            <div class="pixel-corner top-right"></div>
            <div class="pixel-corner bottom-left"></div>
            <div class="pixel-corner bottom-right"></div>
            
            <h2>SUPPORTED SYSTEMS</h2>
            <div class="game-grid">
                <div class="game-card">
                    <div class="game-icon"><i class="fas fa-dice"></i></div>
                    <div class="game-title">NES</div>
                </div>
                <div class="game-card">
                    <div class="game-icon"><i class="fas fa-ghost"></i></div>
                    <div class="game-title">Game Boy</div>
                </div>
                <div class="game-card">
                    <div class="game-icon"><i class="fas fa-ring"></i></div>
                    <div class="game-title">SNES</div>
                </div>
                <div class="game-card">
                    <div class="game-icon"><i class="fas fa-bolt"></i></div>
                    <div class="game-title">Sega Genesis</div>
                </div>
                <div class="game-card">
                    <div class="game-icon"><i class="fas fa-gamepad"></i></div>
                    <div class="game-title">Game Boy Advance</div>
                </div>
                <div class="game-card">
                    <div class="game-icon"><i class="fas fa-dragon"></i></div>
                    <div class="game-title">Atari 2600</div>
                </div>
            </div>
        </div>

        <footer>
            <p>RETRO ROM PLAYER | For educational purposes only | Please only use ROMs you own</p>
        </footer>
    </div>

    <script>
        // DOM elements
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const browseBtn = document.getElementById('browseBtn');
        const fileInfo = document.getElementById('fileInfo');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const fileType = document.getElementById('fileType');
        const placeholderScreen = document.getElementById('placeholderScreen');
        const gameCanvas = document.getElementById('gameCanvas');
        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const fullscreenBtn = document.getElementById('fullscreenBtn');

        // Game state variables
        let gameRunning = false;
        let gamePaused = false;
        let gameLoop;
        let currentGame = null;
        let score = 0;
        let lives = 3;

        // File handling
        browseBtn.addEventListener('click', () => {
            fileInput.click();
        });

        fileInput.addEventListener('change', handleFileSelect);

        // Drag and drop functionality
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.style.background = 'rgba(0, 255, 255, 0.3)';
            dropZone.style.borderColor = '#ff0080';
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.style.background = 'rgba(0, 255, 255, 0.1)';
            dropZone.style.borderColor = '#00ffff';
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.style.background = 'rgba(0, 255, 255, 0.1)';
            dropZone.style.borderColor = '#00ffff';
            
            if (e.dataTransfer.files.length) {
                handleFile(e.dataTransfer.files[0]);
            }
        });

        function handleFileSelect(e) {
            if (e.target.files.length) {
                handleFile(e.target.files[0]);
            }
        }

        function handleFile(file) {
            // Update file info display
            fileName.textContent = file.name;
            fileSize.textContent = formatFileSize(file.size);
            fileType.textContent = getFileType(file.name);
            fileInfo.style.display = 'block';
            
            // Update placeholder screen
            placeholderScreen.innerHTML = `
                <i class="fas fa-file-upload"></i>
                <p>ROM Loaded: ${file.name}</p>
                <p>Click PLAY to start</p>
            `;
            
            // Enable play button
            playBtn.disabled = false;
            
            // Determine which game to load based on file extension
            currentGame = determineGameType(file.name);
            
            console.log('ROM file selected:', file.name, file.size, 'bytes');
            console.log('Game type detected:', currentGame);
        }

        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' bytes';
            else if (bytes < 1048576) return (bytes / 1024).toFixed(2) + ' KB';
            else return (bytes / 1048576).toFixed(2) + ' MB';
        }

        function getFileType(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            const types = {
                'nes': 'Nintendo (NES)',
                'gb': 'Game Boy',
                'gbc': 'Game Boy Color',
                'gba': 'Game Boy Advance',
                'smc': 'Super Nintendo (SNES)',
                'sfc': 'Super Nintendo (SNES)',
                'md': 'Sega Genesis',
                'gen': 'Sega Genesis',
                'a26': 'Atari 2600',
                'bin': 'Binary ROM File'
            };
            return types[ext] || 'Unknown ROM Type';
        }

        function determineGameType(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            // For demo purposes, we'll assign different games based on file extension
            const gameMap = {
                'nes': 'space',
                'gb': 'pong',
                'gbc': 'breakout',
                'gba': 'racer',
                'smc': 'tetris',
                'sfc': 'tetris',
                'md': 'space',
                'gen': 'space',
                'a26': 'pong',
                'bin': 'breakout'
            };
            return gameMap[ext] || 'space'; // Default to space invaders
        }

        // Control buttons
        playBtn.addEventListener('click', () => {
            placeholderScreen.style.display = 'none';
            gameCanvas.style.display = 'block';
            playBtn.disabled = true;
            pauseBtn.disabled = false;
            resetBtn.disabled = false;
            
            // Initialize and start the selected game
            initGame();
            gameRunning = true;
            gamePaused = false;
            
            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(updateGame, 1000/60); // 60 FPS
        });

        pauseBtn.addEventListener('click', () => {
            if (gameRunning) {
                gamePaused = !gamePaused;
                pauseBtn.innerHTML = gamePaused ? 
                    '<i class="fas fa-play"></i> RESUME' : 
                    '<i class="fas fa-pause"></i> PAUSE';
                
                if (gamePaused) {
                    drawPauseScreen();
                }
            }
        });

        resetBtn.addEventListener('click', () => {
            resetGame();
        });

        fullscreenBtn.addEventListener('click', () => {
            const gameScreen = document.querySelector('.game-screen');
            if (!document.fullscreenElement) {
                if (gameScreen.requestFullscreen) {
                    gameScreen.requestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        });

        // Game initialization
        function initGame() {
            const ctx = gameCanvas.getContext('2d');
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
            
            // Initialize game state based on selected game
            score = 0;
            lives = 3;
            
            // Draw initial game screen
            drawGame();
        }

        // Game update loop
        function updateGame() {
            if (!gameRunning || gamePaused) return;
            
            // Update game logic based on current game
            updateGameLogic();
            
            // Draw the game
            drawGame();
        }

        // Game-specific variables
        let playerX = 320;
        let invaders = [];
        let bullets = [];
        let invaderDirection = 1;
        let invaderSpeed = 1;

        // Initialize space invaders
        function initSpaceInvaders() {
            playerX = 320;
            invaders = [];
            bullets = [];
            invaderDirection = 1;
            invaderSpeed = 1;
            
            // Create invaders
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 10; col++) {
                    invaders.push({
                        x: col * 50 + 50,
                        y: row * 30 + 50,
                        width: 30,
                        height: 20,
                        alive: true
                    });
                }
            }
        }

        // Update game logic based on current game type
        function updateGameLogic() {
            switch(currentGame) {
                case 'space':
                    updateSpaceInvaders();
                    break;
                case 'pong':
                    updatePong();
                    break;
                case 'breakout':
                    updateBreakout();
                    break;
                default:
                    updateSpaceInvaders();
            }
        }

        // Update space invaders game
        function updateSpaceInvaders() {
            // Move invaders
            let moveDown = false;
            for (let invader of invaders) {
                if (!invader.alive) continue;
                
                invader.x += invaderSpeed * invaderDirection;
                
                // Check if any invader hits the edge
                if (invader.x <= 10 || invader.x >= gameCanvas.width - 40) {
                    moveDown = true;
                }
            }
            
            // Move invaders down and change direction if needed
            if (moveDown) {
                invaderDirection *= -1;
                for (let invader of invaders) {
                    if (invader.alive) {
                        invader.y += 20;
                    }
                }
                
                // Increase speed
                invaderSpeed += 0.2;
            }
            
            // Move bullets
            for (let i = bullets.length - 1; i >= 0; i--) {
                bullets[i].y -= 5;
                
                // Remove bullets that go off screen
                if (bullets[i].y < 0) {
                    bullets.splice(i, 1);
                    continue;
                }
                
                // Check for collisions with invaders
                for (let j = 0; j < invaders.length; j++) {
                    if (invaders[j].alive && 
                        bullets[i].x > invaders[j].x && 
                        bullets[i].x < invaders[j].x + invaders[j].width &&
                        bullets[i].y > invaders[j].y && 
                        bullets[i].y < invaders[j].y + invaders[j].height) {
                        
                        invaders[j].alive = false;
                        bullets.splice(i, 1);
                        score += 10;
                        break;
                    }
                }
            }
            
            // Check if player is hit by invaders (game over condition)
            for (let invader of invaders) {
                if (invader.alive && invader.y > gameCanvas.height - 50) {
                    gameOver();
                    return;
                }
            }
            
            // Check if all invaders are destroyed
            if (invaders.every(invader => !invader.alive)) {
                levelComplete();
            }
        }

        // Draw the current game
        function drawGame() {
            const ctx = gameCanvas.getContext('2d');
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
            
            switch(currentGame) {
                case 'space':
                    drawSpaceInvaders(ctx);
                    break;
                case 'pong':
                    drawPong(ctx);
                    break;
                case 'breakout':
                    drawBreakout(ctx);
                    break;
                default:
                    drawSpaceInvaders(ctx);
            }
            
            // Draw UI elements
            drawUI(ctx);
        }

        // Draw space invaders game
        function drawSpaceInvaders(ctx) {
            // Draw player
            ctx.fillStyle = '#0f0';
            ctx.fillRect(playerX, gameCanvas.height - 30, 40, 10);
            
            // Draw invaders
            for (let invader of invaders) {
                if (invader.alive) {
                    ctx.fillStyle = '#f00';
                    ctx.fillRect(invader.x, invader.y, invader.width, invader.height);
                }
            }
            
            // Draw bullets
            ctx.fillStyle = '#ff0';
            for (let bullet of bullets) {
                ctx.fillRect(bullet.x, bullet.y, 3, 10);
            }
        }

        // Draw Pong game
        function drawPong(ctx) {
            // Draw paddles
            ctx.fillStyle = '#fff';
            ctx.fillRect(20, 150, 10, 80);
            ctx.fillRect(gameCanvas.width - 30, 150, 10, 80);
            
            // Draw ball
            ctx.beginPath();
            ctx.arc(gameCanvas.width / 2, gameCanvas.height / 2, 8, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw center line
            ctx.setLineDash([5, 15]);
            ctx.beginPath();
            ctx.moveTo(gameCanvas.width / 2, 0);
            ctx.lineTo(gameCanvas.width / 2, gameCanvas.height);
            ctx.strokeStyle = '#fff';
            ctx.stroke();
            ctx.setLineDash([]);
        }

        // Draw Breakout game
        function drawBreakout(ctx) {
            // Draw paddle
            ctx.fillStyle = '#0ff';
            ctx.fillRect(gameCanvas.width / 2 - 40, gameCanvas.height - 20, 80, 10);
            
            // Draw ball
            ctx.beginPath();
            ctx.arc(gameCanvas.width / 2, gameCanvas.height - 30, 8, 0, Math.PI * 2);
            ctx.fillStyle = '#fff';
            ctx.fill();
            
            // Draw bricks
            for (let i = 0; i < 8; i++) {
                for (let j = 0; j < 5; j++) {
                    ctx.fillStyle = `hsl(${j * 36}, 100%, 50%)`;
                    ctx.fillRect(i * 70 + 30, j * 25 + 30, 60, 20);
                }
            }
        }

        // Draw UI elements (score, lives, etc.)
        function drawUI(ctx) {
            ctx.fillStyle = '#fff';
            ctx.font = '16px "Press Start 2P"';
            ctx.fillText(`SCORE: ${score}`, 20, 30);
            ctx.fillText(`LIVES: ${lives}`, gameCanvas.width - 200, 30);
        }

        // Draw pause screen
        function drawPauseScreen() {
            const ctx = gameCanvas.getContext('2d');
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
            
            ctx.fillStyle = '#ff0';
            ctx.font = '24px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText('GAME PAUSED', gameCanvas.width / 2, gameCanvas.height / 2);
            
            ctx.fillStyle = '#fff';
            ctx.font = '16px "Press Start 2P"';
            ctx.fillText('Press RESUME to continue', gameCanvas.width / 2, gameCanvas.height / 2 + 40);
        }

        // Game over screen
        function gameOver() {
            gameRunning = false;
            clearInterval(gameLoop);
            
            const ctx = gameCanvas.getContext('2d');
            ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
            ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
            
            ctx.fillStyle = '#f00';
            ctx.font = '32px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText('GAME OVER', gameCanvas.width / 2, gameCanvas.height / 2 - 30);
            
            ctx.fillStyle = '#ff0';
            ctx.font = '20px "Press Start 2P"';
            ctx.fillText(`FINAL SCORE: ${score}`, gameCanvas.width / 2, gameCanvas.height / 2 + 20);
            
            ctx.fillStyle = '#0ff';
            ctx.font = '16px "Press Start 2P"';
            ctx.fillText('Click RESET to play again', gameCanvas.width / 2, gameCanvas.height / 2 + 60);
        }

        // Level complete screen
        function levelComplete() {
            gameRunning = false;
            clearInterval(gameLoop);
            
            const ctx = gameCanvas.getContext('2d');
            ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
            ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
            
            ctx.fillStyle = '#0f0';
            ctx.font = '32px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText('LEVEL COMPLETE!', gameCanvas.width / 2, gameCanvas.height / 2 - 30);
            
            ctx.fillStyle = '#ff0';
            ctx.font = '20px "Press Start 2P"';
            ctx.fillText(`SCORE: ${score}`, gameCanvas.width / 2, gameCanvas.height / 2 + 20);
            
            ctx.fillStyle = '#0ff';
            ctx.font = '16px "Press Start 2P"';
            ctx.fillText('Click RESET to play again', gameCanvas.width / 2, gameCanvas.height / 2 + 60);
        }

        // Reset game
        function resetGame() {
            gameRunning = false;
            gamePaused = false;
            clearInterval(gameLoop);
            
            placeholderScreen.style.display = 'block';
            gameCanvas.style.display = 'none';
            playBtn.disabled = false;
            pauseBtn.disabled = true;
            resetBtn.disabled = true;
            pauseBtn.innerHTML = '<i class="fas fa-pause"></i> PAUSE';
            
            // Reset game state
            score = 0;
            lives = 3;
        }

        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (!gameRunning || gamePaused) return;
            
            switch(currentGame) {
                case 'space':
                    if (e.key === 'ArrowLeft' && playerX > 10) {
                        playerX -= 10;
                    } else if (e.key === 'ArrowRight' && playerX < gameCanvas.width - 50) {
                        playerX += 10;
                    } else if (e.key === ' ') {
                        // Space bar to shoot
                        bullets.push({
                            x: playerX + 20,
                            y: gameCanvas.height - 40
                        });
                    }
                    break;
                case 'pong':
                    // Pong controls would go here
                    break;
                case 'breakout':
                    // Breakout controls would go here
                    break;
            }
        });

        // Initialize space invaders when page loads
        initSpaceInvaders();
    </script>
</body>
</html>
